# åŠ¨æ€è§„åˆ’æˆ˜ä¸ªç—›å¿«ä¹‹çº¿æ€§åŠ¨æ€è§„åˆ’ï¼ˆäºŒï¼‰ï¼šæœ€å¤§å­æ•°ç»„å’Œç³»åˆ— ğŸš§

<!--æœ€å¤§å­åºå’Œ
ä¹˜ç§¯æœ€å¤§å­æ•°ç»„
ç¯å½¢å­æ•°ç»„çš„æœ€å¤§å’Œ â€”â€” ç¯å½¢æ•°ç»„çš„å¤„ç†
æœ€å¤§å­çŸ©é˜µ â€”â€” æ€è·¯ç±»ä¼¼ä¸€ç»´çš„æœ€å¤§å­æ•°ç»„å’Œ
çŸ©å½¢åŒºåŸŸä¸è¶…è¿‡ K çš„æœ€å¤§æ•°å€¼å’Œ
-->

## æœ€å¤§å­åºå’Œ 

å…ˆä»æœ€ç®€å•çš„è¯´èµ·ï¼Œæœ‰ä¸€ä¸ªæ•´æ•°æ•°ç»„ numsï¼Œæ‰¾åˆ°é‡Œé¢å’Œæœ€å¤§çš„é‚£ä¸ªè¿ç»­å­æ•°ç»„ï¼Œå¹¶è¿”å›æœ€å¤§å’Œã€‚

è¿™é“é¢˜éå¸¸ç®€å•ï¼Œå¯¹äºä¸€ä¸ªè¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œï¼Œå‡è®¾ä¸º dp[i],åˆ™
dp[i] = max(dp[i] + nums[i],nums[i])ã€‚

æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š
```C++
for(int i = 1;i < len;i++) {
    dp[i] = max(dp[i - 1] + nums[i],nums[i]);
    res = max(dp[i],res);
}
```

çœ‹å®Œç®€å•äº†ï¼Œæˆ‘ä»¬æ¥ç€æ¥çœ‹å¦å¤–ä¸€é“ç±»ä¼¼çš„é¢˜ã€‚

è¿˜æ˜¯ç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œæ‰¾åˆ°é‡Œé¢ä¹˜ç§¯æœ€å¤§çš„è¿ç»­å­æ•°ç»„ã€‚

æœ€å¼€å§‹çš„æ€è·¯å¯èƒ½è¿˜æ˜¯ä¼šæŒ‰ç…§æœ€å¤§å­åºå’Œçš„æ–¹å¼ï¼Œä½¿ç”¨çŠ¶æ€è½¬ç§»æ–¹ç¨‹ dp[i] = max(dp[i] + nums[i],nums[i]) æ¥æ±‚å¾—ç»“æœï¼Œä½†æ˜¯è¿™ä¸ªç»“æœæ˜¯æœ‰ä¸€ä¸ªéå¸¸å¤§çš„ç¼ºç‚¹çš„ï¼šæ²¡æœ‰è€ƒè™‘åˆ°è´Ÿæ•°çš„æƒ…å†µï¼Œæœ‰æ—¶å€™æœ¬æ¥æ˜¯ä¸€ä¸ªè´Ÿæ•°çš„æ—¶å€™ï¼Œä¹˜ä»¥ä¸€ä¸ªè´Ÿæ•°å°±ä¼šå˜å¾—æœ€å¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦åšä¸¤å¥—æ–¹æ¡ˆæ¥å‡†å¤‡ã€‚

åˆ†åˆ«è®¾ç½®ä¸¤ä¸ªåŠ¨æ€è§„åˆ’æ•°ç»„ï¼ŒmaxDP å’Œ minDPï¼Œåˆ†åˆ«è¿›è¡Œè®°å½•ç»“æœã€‚åˆ™çŠ¶æ€è½¬ç§»æ–¹ç¨‹å˜æˆäº†
* maxDP[i] = max( max (maxDP[i - 1] * nums[i],nums[i]),minDP[i - 1] * nums[i]);
* minDP[i] = min( min (maxDP[i - 1] * nums[i],nums[i]),minDP[i - 1] * nums[i]);

å°±å¯ä»¥è§£å†³äº†ã€‚

```C++
class Solution {
public:
    int maxProduct(vector<int>& nums) {
        int len = nums.size();
        if(len == 0) return 0;
        int res = nums[0];
        vector<int> maxDP(len);
        vector<int> minDP(len);
        maxDP[0] = nums[0];
        minDP[0] = nums[0];
        for(int i = 1;i < len;i++) {
            maxDP[i] = max( max (maxDP[i - 1] * nums[i],nums[i]),minDP[i - 1] * nums[i]);
            minDP[i] = min( min (maxDP[i - 1] * nums[i],nums[i]),minDP[i - 1] * nums[i]);
            res = max(maxDP[i],res);
        }
        return res;
    }
};
```


# ç¯å½¢å­æ•°ç»„

å¦‚æœç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œæ˜¯å¤´å°¾ç›¸è¿çš„ä¸€ä¸ªç¯å‘¢ï¼Ÿé‚£è¯¥å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªæœ€å¤§çš„å­—æ®µå’Œï¼Ÿ

å³ï¼Œè¿™é‡Œæ˜¯ä¸€ä¸ªç¯å½¢æ•°ç»„ï¼Œæ„å‘³ç€æ•°ç»„çš„æœ«ç«¯å°†ä¼šä¸å¼€å¤´ç›¸è¿å‘ˆç¯çŠ¶ã€‚å¹¶ä¸”ï¼Œ**å­æ•°ç»„æœ€å¤šåªèƒ½åŒ…å«å›ºå®šç¼“å†²åŒº AÂ ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸€æ¬¡ï¼Œä¸èƒ½é‡å¤å ç”¨ã€‚**

æˆ‘ä»¬è¦é¦–å…ˆç†è§£ä¸€ä¸ªæ±‚æœ€å¤§å­æ®µå’Œçš„ Kadane ç®—æ³•ã€‚

å¦‚æœå‡å®š dp[i] ä¸ºä»¥ nums[i] ä¸ºç»“å°¾çš„æœ€å¤§å­æ®µå’Œã€‚ä¹Ÿå°±æ˜¯
`dp[j]= max(nums[i] + nums[i+1] +â‹¯+ nums[j])`

é‚£ä¹ˆè¯´ï¼Œnums[j+1] æœ€å¤§å­—æ®µå’Œåº”è¯¥å–å†³äº nums[j+1] çš„å¤§å°ã€‚å³ï¼š
`dp[j+1] = nums[j+1] + max(dp[j],0)`

å¯ä»¥å†™ä½œä»£ç ï¼š
```C++
vector<int> dpA(A.size());
dpA[0] = A[0];
for(int i = 1;i < A.size();i++) {
    dpA[i] = A[i] + max(dpA[i-1],0);
    ans = max(ans,dpA[i]);
}
```

è¿™é‡Œï¼Œä¸ºäº†èŠ‚çº¦ç©ºé—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ¼”åŒ–ï¼Œå°† dpA æ•°ç»„å˜æˆä¸€ä¸ªå˜é‡ã€‚
```C++
cur = cur = A[0];
for(int i = 1;i < A.size();i++) {
    cur = A[i] + max(cur,0);
    ans = max(ans,cur);
}
``` 

ç„¶åå›åˆ°é—®é¢˜ä¸Šã€‚

å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªé—®é¢˜å®é™…ä¸Šæœ‰ä¸¤ç§æƒ…å†µã€‚
1. è¿™ä¸ªæœ€å¤§å’Œçš„å­æ•°ç»„åœ¨ä¸€ä¸ªåŒºé—´é‡Œï¼›
2. è¿™ä¸ªæœ€å¤§å’Œçš„å­æ•°ç»„åœ¨ä¸¤ä¸ªåŒºé—´é‡Œã€‚

å¯¹äºæƒ…å†µ 1ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ Kadane ç®—æ³•æ¥è§£å†³ã€‚

å¯¹äºæƒ…å†µ 2ï¼Œå¯ä»¥ç»§ç»­å°†å­æ®µåˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œå³ åŒ…æ‹¬ nums[len - 1] åœ¨å†…çš„å·¦åŒºé—´ï¼Œä»¥åŠä»¥å¤–çš„å³åŒºé—´ã€‚

å³åŒºé—´å®é™…ä¸Šæ˜¯æ±‚ä»¥ nums[0] ä¸ºå¼€å¤´çš„å­æ®µå’Œï¼Œä¹Ÿæ˜¯å¾ˆç®€å•çš„
```C++
int rightSum = 0;
for (int i = 0; i < len-2; ++i) {
    rightSum += A[i];
    ......
}
```

é‚£ä¹ˆè¿˜å‰©ä¸‹æœ€åä¸€å—ï¼Œå³è¿™ä¸ªå­æ®µçš„å·¦åŒºé—´ï¼Œå®ƒæ˜¯åŒ…å« nums[len-1] çš„ï¼Œé¢å¤–çš„å…ƒç´ ä¸€å®šåœ¨å®ƒçš„å·¦ä¾§ï¼Œåˆ™è¿™æ®µå˜æˆäº†æ±‚ä»¥ nums[len-1] ä¸ºç»“å°¾çš„å­æ®µå’Œã€‚å½“ç„¶ï¼Œè¿˜æœ‰ä¸€ä¸ªé™åˆ¶æ¡ä»¶ï¼š **å­æ•°ç»„æœ€å¤šåªèƒ½åŒ…å«å›ºå®šç¼“å†²åŒº AÂ ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸€æ¬¡ã€‚**

æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ª rightSumsï¼Œç”¨ä»¥ä¿å­˜å·¦åŒºé—´é‡Œçš„ä»¥ nums[len-1] ç»“å°¾çš„æ¯ä¸€æ®µçš„å’Œï¼›ç„¶ååœ¨è®¡ç®—å‡ºè¿™é‡Œé¢æœ€å¤§çš„é‚£ä¸ªå¹¶ä¿å­˜ã€‚

ç„¶ååœ¨æœ€åè®¡ç®—çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°†éå† rightSum å°†å…¶ä¸ leftMax ç›¸åŠ ï¼Œä»¥è·å–æœ€å¤§å€¼ã€‚

æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œç›¸åŠ çš„æ˜¯ leftMax[i+2]ï¼Œå› ä¸º**å­æ•°ç»„æœ€å¤šåªèƒ½åŒ…å«å›ºå®šç¼“å†²åŒº AÂ ä¸­çš„æ¯ä¸ªå…ƒç´ ä¸€æ¬¡ã€‚**


```C++
class Solution {
public:
    int maxSubarraySumCircular(vector<int>& A) {
        int len = A.size();
        int ans = A[0],cur = A[0];
        //å•åŒºé—´
        for(int i = 1;i < len;i++) {
            cur = A[i] + max(cur,0);
            ans = max(ans,cur);
        }
        //åŒåŒºé—´ï¼Œå·¦å³ä»¥å­æ®µä¸ºæ ‡å‡†
        vector<int> leftSums(len);
        leftSums[len-1] = A[len-1];
        vector<int> leftMax(len);
        leftMax[len-1] = A[len-1];

        for(int i = len -2;i >=0;i--){
            leftSums[i] = leftSums[i+1] + A[i];
            leftMax[i] = max(leftMax[i+1],leftSums[i]);
        }

        int rightSum = 0;
        for (int i = 0; i < len-2; ++i) {
            rightSum += A[i];
            ans = max(ans, rightSum + leftMax[i+2]);
        }
        return ans;


    }
};
```
